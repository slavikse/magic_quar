(function(t){function e(e){for(var n,a,s=e[0],c=e[1],l=e[2],u=0,h=[];u<s.length;u++)a=s[u],r[a]&&h.push(r[a][0]),r[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,s=1;s<o.length;s++){var c=o[s];0!==r[c]&&(n=!1)}n&&(i.splice(e--,1),t=a(a.s=o[0]))}return t}var n={},r={0:0},i=[];function a(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=n,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(o,n,function(e){return t[e]}.bind(null,n));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;i.push([0,1]),o()})({0:function(t,e,o){t.exports=o("Vtdi")},Vtdi:function(t,e,o){"use strict";o.r(e);o("yt8O"),o("VRzm"),o("sEhn"),o("MsAy"),o("RQMZ"),o("YeD5");var n=o("Kw5r"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-scene",{attrs:{physics:"debug: false; iterations: 1000; maxInterval: 0.01","vr-mode-ui":"enabled: false",stats:"false",background:"color: #333"}},[o("a-assets",[o("img",{attrs:{id:"background",src:"textures/background.jpg"}}),o("img",{attrs:{id:"roof",src:"textures/roof.jpg"}}),o("img",{attrs:{id:"floor",src:"textures/floor.jpg"}}),o("img",{attrs:{id:"wall",src:"textures/wall.jpg"}})]),o("a-sky",{attrs:{radius:"500",src:"#background"}}),o("a-light",{attrs:{type:"ambient",color:"white"}}),o("a-entity",{attrs:{position:"-6 1 -5",rotation:"0 -60 0",light:"type: directional; decay: 2; color: #ffc18f; intensity: 0.67; castShadow: true"}}),o("a-box",{attrs:{position:"11 4 -12",width:"2",height:"3",depth:"0.5","dynamic-body":"mass: 4",shadow:"castShadow: true",color:"cyan"}}),o("a-box",{attrs:{position:"9 4 -10",width:"2",height:"3",depth:"0.5","dynamic-body":"mass: 4",shadow:"castShadow: true",color:"cyan"}}),o("a-box",{attrs:{position:"7 4 -8",width:"2",height:"3",depth:"0.5","dynamic-body":"mass: 4",shadow:"castShadow: true",color:"cyan"}}),o("a-box",{attrs:{position:"5 4 -6",width:"2",height:"3",depth:"0.5","dynamic-body":"mass: 4",shadow:"castShadow: true",color:"cyan"}}),o("Balls"),o("Mobs"),o("Player"),o("Walls"),o("a-box",{attrs:{constraint:"target: #player; type: distance; distance: 4","dynamic-body":"",color:"teal"}})],1)},i=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-entity",t._l(t.balls,function(e){var n=e.id,r=e.isShown;return r?o("Ball",{key:n,attrs:{id:n}}):t._e()}))},s=[],c=o("iv4g"),l=(o("ls82"),o("MECJ")),d=o("xDdU"),u=o.n(d),h=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-sphere",{attrs:{radius:"0.04","dynamic-body":"mass: 1",color:"teal"}})},p=[],f={name:"Ball"},b=f,m=o("KHd+"),y=Object(m["a"])(b,h,p,!1,null,null,null),w=y.exports,g={name:"Balls",components:{Ball:w},data:function(){return{balls:[],lifeTime:5e3,interval:null,clearTime:6e4}},mounted:function(){document.addEventListener("fire",this.fire),this.interval=setInterval(this.cleaner,this.clearTime)},destroyed:function(){document.removeEventListener("fire",this.fire),clearInterval(this.interval)},methods:{fire:function(t){var e=t.detail,o=e.position,n=e.direction,r=u()();setTimeout(this.hide.bind(this,r),this.lifeTime),this.balls.push({id:r,isShown:!0}),this.$nextTick(this.acceleration.bind(null,r,o,n))},hide:function(t){var e=this;this.balls.some(function(o,n){var r=o.id;return r===t&&(e.balls[n].isShown=!1,!0)})},acceleration:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e,o,n){var r,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,document.getElementById(e);case 2:a=t.sent,(r=a.body.position).set.apply(r,Object(c["a"])(o)),(i=a.body.velocity).set.apply(i,Object(c["a"])(n));case 5:case"end":return t.stop()}},t,this)}));return function(e,o,n){return t.apply(this,arguments)}}(),cleaner:function(){this.balls=this.balls.filter(function(t){var e=t.isShown;return e})}}},v=g,x=Object(m["a"])(v,a,s,!1,null,null,null),S=x.exports,j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-entity",{attrs:{position:"0 1 -2",raycaster:"",shadow:"receive: true"},on:{"raycaster-intersected":t.intersected}},[o("a-box",{attrs:{position:"0 1.5 0",width:"0.4",height:"0.4",depth:"0.4",constraint:"target: #body","static-body":"",color:"#755"}}),o("a-box",{attrs:{position:"0 0.4 0",width:"0.7",height:"1.5",depth:"0.7","static-body":"",id:"body",color:"#955"}}),o("a-box",{attrs:{position:"-0.7 0.6 0",width:"0.3",height:"1",depth:"0.3",constraint:"target: #body","static-body":"",color:"#755"}}),o("a-box",{attrs:{position:"0.7 0.6 0",width:"0.3",height:"1",depth:"0.3",constraint:"target: #body","static-body":"",color:"#755"}}),o("a-box",{attrs:{position:"-0.4 -0.8 0",width:"0.5",height:"0.3",depth:"0.5",constraint:"target: #body","static-body":"",color:"#755"}}),o("a-box",{attrs:{position:"0.4 -0.8 0",width:"0.5",height:"0.3",depth:"0.5",constraint:"target: #body","static-body":"",color:"#755"}})],1)},k=[],_={name:"Mob",methods:{intersected:function(){}}},O=_,E=Object(m["a"])(O,j,k,!1,null,null,null),M=E.exports,R=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-entity",{attrs:{id:"player","movement-controls":"fly: false; speed: 0.45","jump-ability":"maxJumps: 1; distance: 1.1","kinematic-body":"","mesh-smooth":""}},[o("a-entity",{attrs:{position:"0 1.6 0","look-controls":"pointerLockEnabled: true",camera:""},on:{click:t.click,collide:t.collide}},[o("a-cursor",{ref:"cursor",attrs:{geometry:"primitive: ring; radiusInner: 0.0001; radiusOuter: 0.003",material:"shader: flat; color: black",cursor:"fuse: false"}})],1)],1)},P=[],T={name:"Player",data:function(){return{click:Function,rate:100,acceleration:-30}},mounted:function(){this.click=window.AFRAME.utils.throttle(this.fire,this.rate,null),window.app.fire=this.fire},methods:{fire:function(){var t=this,e=this.$refs.cursor.object3D,o=e.getWorldPosition(),n=o.x,r=o.y,i=o.z,a=e.getWorldDirection(),s=a.x,c=a.y,l=a.z,d=new CustomEvent("fire",{detail:{position:[n,r,i],direction:[s,c,l].map(function(e){return e*t.acceleration})}});document.dispatchEvent(d)},collide:function(t){},intersection:function(t){}}},$=T,A=Object(m["a"])($,R,P,!1,null,null,null),B=A.exports,J=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a-entity",[o("a-box",{attrs:{position:"0 5 0",rotation:"-90 0 0",height:"30",width:"30",depth:"0.5",material:"side: double",repeat:"20 20",roughness:"1",src:"#roof","static-body":""}}),o("a-plane",{attrs:{rotation:"-90 0 0",height:"100",width:"100",repeat:"50 50",roughness:"1",src:"#floor","static-body":"",shadow:"receive: true"}}),o("a-box",{attrs:{position:"0 2 -15",rotation:"0 0 0",height:"6",width:"30",depth:"0.5",material:"side: double",repeat:"15 2",roughness:"1",src:"#wall","static-body":""}}),o("a-box",{attrs:{position:"0 2 15",rotation:"0 180 0",height:"6",width:"30",depth:"0.5",material:"side: double",repeat:"15 2",roughness:"1",src:"#wall","static-body":""}}),o("a-box",{attrs:{position:"15 2 0",rotation:"0 -90 0",height:"6",width:"30",depth:"0.5",material:"side: double",repeat:"15 2",roughness:"1",src:"#wall","static-body":""}})],1)},L=[],F={name:"Walls",components:{}},I=F,U=Object(m["a"])(I,J,L,!1,null,null,null),V=U.exports,W={name:"App",components:{Balls:S,Mobs:M,Player:B,Walls:V},data:function(){return{color:"#000"}},methods:{fire:function(){this.changeColor()},changeColor:function(){this.color="#".concat((155*Math.random()+100).toFixed(0))}}},C=W,D=Object(m["a"])(C,r,i,!1,null,null,null),z=D.exports,G=o("jE9Z");n["a"].use(G["a"]);var K=new G["a"]({routes:[{path:"/",name:"App",component:z}]}),Z=o("L2JU");n["a"].use(Z["a"]);var H=new Z["a"].Store({state:{},mutations:{},actions:{}});n["a"].config.productionTip=!1,window.app={},new n["a"]({router:K,store:H,render:function(t){return t(z)}}).$mount("#app");var Q=window.SpeechRecognition||window.webkitSpeechRecognition,Y=window.SpeechGrammarList||window.webkitSpeechGrammarList,q=(window.SpeechRecognitionEvent||window.webkitSpeechRecognitionEvent,["раз","парашют","выстрел"]),N="#JSGF V1.0; grammar words; public <words> = ".concat(q.join(" | ")," ;"),X=new Q,tt=new Y;tt.addFromString(N,1),X.grammars=tt,X.continuous=!0,X.lang="ru-RU",X.maxAlternatives=1,X.start();var et=window.speechSynthesis,ot=et.getVoices(),nt=new SpeechSynthesisUtterance;X.onresult=function(t){var e=t.results,o=e.length-1,n=e[o][0].transcript;console.log("Уверенность: "+e[0][0].confidence);var r=n.trim();"выстрел"===r&&(window.app.fire(),new Audio("audios/revolver_shoot1.mp3").play()),nt.lang="ru-RU",nt.pitch=1,nt.rate=1,nt.voice=ot[0],nt.text="Команда: ".concat(r,". Принято!"),"пасхалка"===r&&(nt.text="Не надо тут выпрашивать, что ещё не реализовано я СКАЗАЛ!!! А-ТА-ТА!!!"),et.speak(nt),console.log(nt.text)},X.onspeechend=function(){console.log("onspeechend"),setTimeout(function(){X.start()},1e3)},new Audio("audios/octobernight.mp3").play()}});
//# sourceMappingURL=app.d7ca0e1b.js.map